{
  "directive": "Define the main Lambda handler, configuration management, and the Lambda entry point.\n\n**Main Lambda Handler (Checklist Item 16)**\n\nIn section 6, create \"6. Main Lambda Handler\" (`cmd/lambda/main.go`):\n\n**6.1 Universal Handler Function:**\n- `Handler(ctx context.Context, event json.RawMessage) (any, error)` function signature\n\nThis is the main entry point registered with the Lambda runtime. Document that it:\n1. Receives raw JSON events from any source\n2. Uses Router.DetectEventType to determine event source\n3. Routes to appropriate handler (HandleAPIGateway, HandleCustomEvent, or HandleStepFunction)\n4. Returns the handler's response (type varies by handler)\n5. Marshals/unmarshals events as needed for type safety\n\n**Configuration Management (Checklist Items 17-18, 51)**\n\nIn section 6.2, define:\n\n**Config Type:**\n```go\ntype Config struct {\n    StackName string  // From STACK_NAME env var (required)\n    AWSRegion string  // From AWS_REGION env var (default: us-east-1)\n}\n```\n\n**LoadConfig Function:**\n- `LoadConfig() (Config, error)` function signature\n\nDocument error handling pattern:\n- Returns error if STACK_NAME is missing or empty\n- Uses DefaultAWSRegion (\"us-east-1\") if AWS_REGION not set\n- Environment variable validation occurs at startup\n\n**Main Function (Checklist Items 52-53)**\n\nIn section 6.3, define:\n\n**main() function structure:**\n```go\nfunc main()\n```\n\nDocument the initialization sequence:\n1. Call LoadConfig() to load environment variables\n2. Initialize Router via NewRouter()\n3. Register the universal Handler function with lambda.Start()\n4. Note: main() must call lambda.Start(Handler) per AWS Lambda Go runtime requirements\n\nThe Lambda runtime takes control after lambda.Start() is called and routes all invocations through the registered Handler function.\n\n**Import Requirements:**\n\nDocument required imports for cmd/lambda/main.go:\n- Standard library: context, encoding/json, os (for environment variables)\n- AWS Lambda SDK: github.com/aws/aws-lambda-go/lambda\n- Internal packages: internal/handlers, internal/router",
  "complete": false
}
